"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3211],{3211:(N,c,r)=>{r.r(c),r.d(c,{UserRolePageModule:()=>I});var d=r(6019),l=r(7537),u=r(5882),m=r(1553),R=r(4762),g=r(1945),e=r(3668),h=r(5378),p=r(7371),f=r(7842);function Z(s,i){1&s&&(e.TgZ(0,"h3",17),e._uU(1,"Create User Role"),e.qZA())}function v(s,i){1&s&&(e.TgZ(0,"h3",17),e._uU(1,"User Role Detail"),e.qZA())}let U=(()=>{class s{constructor(t,o,a,n){this.modalCtrl=t,this.cdf=o,this.modal=a,this.database=n,this.isCreate=!0,this.userId="",this.date=new Date,this.roleOption=[],this.userOption=[],this.currentTimeInSeconds=Math.floor(Date.now()/1e3),this.data={}}ngOnInit(){this.getRole(),this.getUser(),this.loadForm()}getRole(){this.database.getData("ROLE").then(t=>{console.log(t),this.roleOption=this.getFormatOpt(t),this.cdf.detectChanges()})}getFormatOpt(t){return t.map(o=>({code:o.roleCode,value:o.roleValue}))}getUser(){this.database.getData("USER").then(t=>{console.log(t),this.userOption=this.getFormatOptUser(t),this.cdf.detectChanges()})}getFormatOptUser(t){return t.map(o=>({code:o.userId,value:o.userName}))}ngAfterViewInit(){this.userId=this.data?this.data.userId:"USER-"+this.currentTimeInSeconds}loadForm(){console.log("data",this.data),this.userRoleForm=new l.cw({userId:new l.NI(this.userId||null),userName:new l.NI(this.data?this.data.userName:null,l.kI.required),userRole:new l.NI(this.data?this.data.userRole:null,l.kI.required),createddate:new l.NI(this.data?this.data.createddate:(0,d.p6)(this.date,"dd-MM-yyyy","en")),updateddate:new l.NI((0,d.p6)(this.date,"dd-MM-yyyy","en"))})}cancel(){this.modal.dismissAll()}createUserRole(){let t=Object.assign(Object.assign({},this.userRoleForm.value),{userId:this.userId});this.modal.dismissAll({data:t})}isControlValid(t){const o=this.userRoleForm.controls[t];return o.valid&&(o.dirty||o.touched)}isControlInvalid(t){const o=this.userRoleForm.controls[t];return o.invalid&&(o.dirty||o.touched)}controlHasError(t,o){const a=this.userRoleForm.controls[o];return a.hasError(t)&&(a.dirty||a.touched)}isControlTouched(t){const o=this.userRoleForm.controls[t];return o.dirty||o.touched}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(u.IN),e.Y36(e.sBO),e.Y36(h.FF),e.Y36(p.k9))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-user-role"]],inputs:{data:"data"},decls:31,vars:14,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],["class","card-label",4,"ngIf"],[1,"overlay","overlay-block","cursor-default","modal-body"],["action","#",1,"form",3,"formGroup","ngSubmit"],[1,"row",2,"align-items","center"],[1,"col-sm-12"],[1,"form-group","row"],[1,"col-sm-6","col-form-label"],[1,"col-sm-6"],["bindLabel","value","bindValue","value","formControlName","userName",1,"ng-custom-select","ng-custom-select-sm",3,"items"],[1,"row"],["bindLabel","value","bindValue","code","formControlName","userRole",1,"ng-custom-select","ng-custom-select-sm",3,"items"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","submit",1,"btn","btn-primary","btn-elevate",3,"disabled","click"],[1,"card-label"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Z,2,0,"h3",3),e.YNc(4,v,2,0,"h3",3),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"form",5),e.NdJ("ngSubmit",function(){return o.createUserRole()}),e.TgZ(7,"div"),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"label",9),e._uU(12,"User Name "),e.TgZ(13,"span"),e._uU(14,"*"),e.qZA(),e.qZA(),e.TgZ(15,"div",10),e._UZ(16,"ng-select",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",12),e.TgZ(18,"div",7),e.TgZ(19,"div",8),e.TgZ(20,"label",9),e._uU(21,"User Role "),e.TgZ(22,"span"),e._uU(23,"*"),e.qZA(),e.qZA(),e.TgZ(24,"div",10),e._UZ(25,"ng-select",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",14),e.TgZ(27,"button",15),e.NdJ("click",function(){return o.cancel()}),e._uU(28,"Cancel"),e.qZA(),e.TgZ(29,"button",16),e.NdJ("click",function(){return o.createUserRole()}),e._uU(30,"Save"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",o.isCreate),e.xp6(1),e.Q6J("ngIf",!o.isCreate),e.xp6(2),e.Q6J("formGroup",o.userRoleForm),e.xp6(10),e.ekj("is-invalid",o.isControlInvalid("userName"))("is-valid",o.isControlValid("userName")),e.Q6J("items",o.userOption),e.xp6(9),e.ekj("is-invalid",o.isControlInvalid("userRole"))("is-valid",o.isControlValid("userRole")),e.Q6J("items",o.roleOption),e.xp6(4),e.Q6J("disabled",o.userRoleForm.invalid))},directives:[d.O5,l._Y,l.JL,l.sg,f.w9,l.JJ,l.u],styles:[""]}),s})();const b=[{title:"No",type:"field",field:"no",isNo:!0},{title:"User Name",type:"field",field:"userName"},{title:"User Role",type:"field",field:"userRole"},{title:"Action",type:"action",field:"actions",btn:{edit:!0,delete:!0}}],A=["no","userName","userRole","actions"],T=[{path:"",component:(()=>{class s{constructor(t,o,a,n){this.cdf=t,this.modalCtrl=o,this.modalService=a,this.database=n,this.userList=[],this.ELEMENT_COL=b,this.displayedColumns=A}ngOnInit(){this.getuserList()}getuserList(){this.database.getData("USER_ROLE").then(t=>{console.log(t),this.userList=t,this.cdf.detectChanges(),this.matTable.reChangeData()})}addNewUserRole(t){return(0,R.mG)(this,void 0,void 0,function*(){const o=this.modalService.open(U,{size:"md",backdrop:!1});o.componentInstance.type="modal",o.componentInstance.isCreate=!t,o.componentInstance.data=t,o.result.then(()=>{},a=>{if(a){let n=a.data;t?(this.database.update("USER_ROLE",n),this.getuserList()):(this.database.create("USER_ROLE",n),this.getuserList())}})})}addNewCategory(){}actionBtn(t){"edit"==t.cmd?this.addNewUserRole(t.data):(this.database.remove("USER_ROLE",t.data.userId,"userId"),this.getuserList())}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(e.sBO),e.Y36(u.IN),e.Y36(h.FF),e.Y36(p.k9))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-role"]],viewQuery:function(t,o){if(1&t&&e.Gf(g.I,5),2&t){let a;e.iGM(a=e.CRH())&&(o.matTable=a.first)}},decls:12,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","emitter"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h3",5),e._uU(6,"User Role"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return o.addNewCategory()}),e._uU(9," Add New Data "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"app-material-table-view",9),e.NdJ("emitter",function(n){return o.actionBtn(n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.Q6J("data",o.userList)("colum",o.ELEMENT_COL)("displayedColumns",o.displayedColumns))},directives:[g.I],styles:[""]}),s})()}];let y=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[m.Bz.forChild(T)],m.Bz]}),s})();var C=r(4136);let I=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[d.ez,l.u5,u.Pc,C.fA,y]]}),s})()}}]);